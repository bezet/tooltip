{"version":3,"file":"tooltip.js","sources":["../src/Tooltip.js","../src/main.js"],"sourcesContent":["class Tooltip {\r\n  constructor( tooltipSelector = 'a' ) {\r\n    this.tooltippedElements = document.querySelectorAll( tooltipSelector );\r\n    this.tooltip = null;\r\n    this.createTooltip();\r\n  }\r\n\r\n  createTooltip() {\r\n    const tooltipBox = document.createElement( 'span' );\r\n    tooltipBox.classList.add( 'tooltip' );\r\n    document.body.appendChild( tooltipBox );\r\n\r\n    this.tooltip = tooltipBox;\r\n\r\n    this.copyLabels();\r\n  }\r\n\r\n  copyLabels() {\r\n    [ ...this.tooltippedElements ].forEach( ( element ) => {\r\n      if ( element.hasAttribute( 'title' ) ) {\r\n        const title = element.getAttribute( 'title' );\r\n\r\n        // TODO: Provide WAI-ARIA support\r\n        if ( title !== '' ) {\r\n          element.setAttribute( 'title', '' );\r\n          element.dataset.title = title;\r\n          this.bindElementEvents( element );\r\n        }\r\n      }\r\n    } );\r\n  }\r\n\r\n  bindElementEvents( element ) {\r\n    const tooltippedElement = element;\r\n    const tooltip = this.tooltip;\r\n    const tooltippedElementRect = tooltippedElement.getBoundingClientRect();\r\n    const tooltippedElementStyles = window.getComputedStyle( tooltippedElement );\r\n\r\n    // const tooltipInViewport = ( elementRectTop ) => {\r\n    //   return elementRectTop > 40;\r\n    // };\r\n\r\n    const calcXShift = ( event ) => {\r\n      let xShift = event.pageX;\r\n      xShift -= ( tooltip.clientWidth / 2 );\r\n\r\n      // if ( tooltippedElementRect.left > ( tooltip.clientWidth - tooltippedElementRect.width ) ) {\r\n      //   xShift -= ( tooltip.clientWidth / 2 );\r\n      // }\r\n      //\r\n      // if ( tooltippedElementRect.right < ( tooltip.clientWidth - tooltippedElementRect.width ) ) {\r\n      //   xShift += ( tooltip.clientWidth / 2 );\r\n      // }\r\n\r\n      return xShift;\r\n    };\r\n\r\n    const calcYShift = ( event ) => {\r\n      let yShift = -( tooltip.clientHeight + 10 );\r\n\r\n      if ( tooltippedElementStyles.getPropertyValue( 'display' ) !== 'block' ) {\r\n        yShift += tooltippedElementRect.top;\r\n      } else {\r\n        yShift += event.pageY;\r\n      }\r\n\r\n      return yShift;\r\n    };\r\n\r\n    const setTooltipPosition = ( event ) => {\r\n      tooltip.style.top = `${calcYShift( event )}px`;\r\n      tooltip.style.left = `${calcXShift( event )}px`;\r\n    };\r\n\r\n    const toggleTooltipVisibility = () => {\r\n      const visibilityClass = 'tooltip--visible';\r\n      tooltip.classList.toggle( visibilityClass );\r\n      if ( !tooltip.classList.contains( visibilityClass ) ) {\r\n        tooltip.removeAttribute( 'style' );\r\n      }\r\n    };\r\n\r\n    tooltippedElement.addEventListener( 'mouseover', ( event ) => {\r\n      tooltip.textContent = tooltippedElement.dataset.title;\r\n      setTooltipPosition( event );\r\n      toggleTooltipVisibility();\r\n    } );\r\n\r\n    tooltippedElement.addEventListener( 'mousemove', ( event ) => {\r\n      setTooltipPosition( event );\r\n    } );\r\n\r\n    tooltippedElement.addEventListener( 'mouseleave', () => {\r\n      toggleTooltipVisibility();\r\n    } );\r\n  }\r\n}\r\n\r\nexport default Tooltip;\r\n","import Tooltip from './Tooltip.js';\r\n// let tooltip = new Tooltip();\r\n"],"names":["Tooltip","tooltipSelector","tooltippedElements","document","querySelectorAll","tooltip","createTooltip","tooltipBox","createElement","classList","add","body","appendChild","copyLabels","forEach","element","hasAttribute","title","getAttribute","setAttribute","dataset","bindElementEvents","tooltippedElement","tooltippedElementRect","getBoundingClientRect","tooltippedElementStyles","window","getComputedStyle","calcXShift","event","xShift","pageX","clientWidth","calcYShift","yShift","clientHeight","getPropertyValue","top","pageY","setTooltipPosition","style","left","toggleTooltipVisibility","visibilityClass","toggle","contains","removeAttribute","addEventListener","textContent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA;qBACiC;QAAxBC,eAAwB,uEAAN,GAAM;;;SAC9BC,kBAAL,GAA0BC,SAASC,gBAAT,CAA2BH,eAA3B,CAA1B;SACKI,OAAL,GAAe,IAAf;SACKC,aAAL;;;;;oCAGc;UACRC,aAAaJ,SAASK,aAAT,CAAwB,MAAxB,CAAnB;iBACWC,SAAX,CAAqBC,GAArB,CAA0B,SAA1B;eACSC,IAAT,CAAcC,WAAd,CAA2BL,UAA3B;;WAEKF,OAAL,GAAeE,UAAf;;WAEKM,UAAL;;;;iCAGW;;;kCACN,KAAKX,kBAAV,GAA+BY,OAA/B,CAAwC,UAAEC,OAAF,EAAe;YAChDA,QAAQC,YAAR,CAAsB,OAAtB,CAAL,EAAuC;cAC/BC,QAAQF,QAAQG,YAAR,CAAsB,OAAtB,CAAd;;;cAGKD,UAAU,EAAf,EAAoB;oBACVE,YAAR,CAAsB,OAAtB,EAA+B,EAA/B;oBACQC,OAAR,CAAgBH,KAAhB,GAAwBA,KAAxB;kBACKI,iBAAL,CAAwBN,OAAxB;;;OARN;;;;sCAciBA,SAAU;UACrBO,oBAAoBP,OAA1B;UACMV,UAAU,KAAKA,OAArB;UACMkB,wBAAwBD,kBAAkBE,qBAAlB,EAA9B;UACMC,0BAA0BC,OAAOC,gBAAP,CAAyBL,iBAAzB,CAAhC;;;;;;UAMMM,aAAa,SAAbA,UAAa,CAAEC,KAAF,EAAa;YAC1BC,SAASD,MAAME,KAAnB;kBACY1B,QAAQ2B,WAAR,GAAsB,CAAlC;;;;;;;;;;eAUOF,MAAP;OAZF;;UAeMG,aAAa,SAAbA,UAAa,CAAEJ,KAAF,EAAa;YAC1BK,SAAS,EAAG7B,QAAQ8B,YAAR,GAAuB,EAA1B,CAAb;;YAEKV,wBAAwBW,gBAAxB,CAA0C,SAA1C,MAA0D,OAA/D,EAAyE;oBAC7Db,sBAAsBc,GAAhC;SADF,MAEO;oBACKR,MAAMS,KAAhB;;;eAGKJ,MAAP;OATF;;UAYMK,qBAAqB,SAArBA,kBAAqB,CAAEV,KAAF,EAAa;gBAC9BW,KAAR,CAAcH,GAAd,GAAuBJ,WAAYJ,KAAZ,CAAvB;gBACQW,KAAR,CAAcC,IAAd,GAAwBb,WAAYC,KAAZ,CAAxB;OAFF;;UAKMa,0BAA0B,SAA1BA,uBAA0B,GAAM;YAC9BC,kBAAkB,kBAAxB;gBACQlC,SAAR,CAAkBmC,MAAlB,CAA0BD,eAA1B;YACK,CAACtC,QAAQI,SAAR,CAAkBoC,QAAlB,CAA4BF,eAA5B,CAAN,EAAsD;kBAC5CG,eAAR,CAAyB,OAAzB;;OAJJ;;wBAQkBC,gBAAlB,CAAoC,WAApC,EAAiD,UAAElB,KAAF,EAAa;gBACpDmB,WAAR,GAAsB1B,kBAAkBF,OAAlB,CAA0BH,KAAhD;2BACoBY,KAApB;;OAFF;;wBAMkBkB,gBAAlB,CAAoC,WAApC,EAAiD,UAAElB,KAAF,EAAa;2BACxCA,KAApB;OADF;;wBAIkBkB,gBAAlB,CAAoC,YAApC,EAAkD,YAAM;;OAAxD;;;;IAMJ;;ACjGA"}