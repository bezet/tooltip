{"version":3,"file":"tooltip.js","sources":["../src/Tooltip.js","../src/main.js"],"sourcesContent":["/* eslint no-unused-vars: 0 */\r\n\r\nclass Tooltip {\r\n  constructor( tooltipSelector = 'a' ) {\r\n    this.tooltippedElements = document.querySelectorAll( tooltipSelector );\r\n    this.tooltip = null;\r\n    this.createTooltip();\r\n  }\r\n\r\n  createTooltip() {\r\n    const tooltipBox = document.createElement( 'span' );\r\n    tooltipBox.classList.add( 'tooltip' );\r\n    document.body.appendChild( tooltipBox );\r\n\r\n    this.tooltip = tooltipBox;\r\n\r\n    this.copyLabels();\r\n  }\r\n\r\n  copyLabels() {\r\n    [ ...this.tooltippedElements ].forEach( ( element ) => {\r\n      if ( element.hasAttribute( 'title' ) || element.hasAttribute( 'data-title' ) ) {\r\n        // TODO: Provide WAI-ARIA support\r\n\n        let title = '';\r\n\r\n        if ( element.hasAttribute( 'title' ) && element.getAttribute( 'title' ) !== '' ) {\r\n          title = element.getAttribute( 'title' );\r\n          element.setAttribute( 'title', '' );\r\n          element.dataset.title = title;\r\n\r\n        } else if ( element.hasAttribute( 'data-title' ) && element.dataset.title !== '' ) {\r\n          title = element.dataset.title;\r\n        }\r\n\r\n        if ( element.dataset.title !== '' ) {\r\n          element.dataset.position = this.getTooltipPosition( element, this.getTooltipDimensions( title ) );\r\n          this.bindElementEvents( element );\r\n        }\r\n      }\r\n    } );\r\n  }\r\n\r\n  getTooltipDimensions( tooltipText ) {\r\n    const tooltipDimensions = [];\r\n    this.tooltip.textContent = tooltipText;\r\n    tooltipDimensions[ 0 ] = this.tooltip.offsetWidth;\r\n    tooltipDimensions[ 1 ] = this.tooltip.offsetHeight;\r\n    this.tooltip.textContent = '';\r\n\r\n    return tooltipDimensions;\r\n  }\r\n\r\n  getVerticalTooltipPosition( tooltippedElementRect, tooltipDimensions ) {\r\n    let verticalTooltipPosition = 'top';\r\n    if ( tooltippedElementRect.top < ( tooltippedElementRect.height + tooltipDimensions[ 1 ] ) ) {\r\n      verticalTooltipPosition = 'bottom';\r\n    }\r\n    return verticalTooltipPosition;\r\n  }\r\n\r\n  getHorizontalTooltipPosition( tooltippedElementRect, tooltipDimensions ) {\r\n    let horizontalTooltipPosition = 'center';\r\n\r\n    if ( tooltippedElementRect.left < ( ( tooltipDimensions[ 0 ] / 2 ) - ( tooltippedElementRect.width / 2 ) ) ) {\r\n      horizontalTooltipPosition = 'left';\r\n    }\r\n\r\n    // if ( tooltippedElementRect.right ) {\r\n    //   tooltipPosition[ 1 ] = 'right';\r\n    // }\r\n\r\n    return horizontalTooltipPosition;\r\n  }\r\n\r\n  getTooltipPosition( tooltippedElement, tooltipDimensions ) {\r\n    const tooltippedElementRect = tooltippedElement.getBoundingClientRect();\r\n    const tooltipPosition = [];\r\n    tooltipPosition[ 0 ] = this.getVerticalTooltipPosition( tooltippedElementRect, tooltipDimensions );\r\n    tooltipPosition[ 1 ] = this.getHorizontalTooltipPosition( tooltippedElementRect, tooltipDimensions );\r\n    return tooltipPosition.join( '-' );\r\n  }\r\n\r\n  bindElementEvents( element ) {\r\n    const tooltippedElement = element;\r\n    let tooltippedElementRect = tooltippedElement.getBoundingClientRect();\r\n\r\n    const tooltip = this.tooltip;\r\n    const tooltipPosition = tooltippedElement.dataset.position.split( '-' );\r\n\r\n    const calcXShift = ( event ) => {\r\n      // [TOP/BOTTOM]-LEFT case\r\n      let xShift = tooltippedElementRect.left;\r\n\r\n      if ( tooltipPosition[ 1 ] === 'center' ) {\r\n        // [TOP/BOTTOM]-CENTER case\r\n        xShift -= ( tooltip.clientWidth - tooltippedElementRect.width ) / 2;\r\n\r\n      } else if ( tooltipPosition[ 1 ] === 'right' ) {\r\n        // [TOP/BOTTOM]-RIGHT case\r\n        xShift += tooltippedElementRect.width - tooltip.clientWidth;\r\n      }\r\n\r\n      return xShift;\r\n    };\r\n\r\n    const calcYShift = ( event ) => {\r\n      let yShift = 0;\r\n\r\n      if ( tooltipPosition[ 0 ] === 'top' ) {\r\n        // TOP-[LEFT/CENTER/RIGHT] case\r\n        yShift = tooltippedElementRect.top - tooltip.clientHeight - 10;\r\n\r\n      } else if ( tooltipPosition[ 0 ] === 'bottom' ) {\r\n        // BOTTOM-[LEFT/CENTER/RIGHT] case\r\n        yShift = tooltippedElementRect.bottom + 10;\r\n      }\r\n\r\n      return yShift;\r\n    };\r\n\r\n    const setTooltipPosition = ( event ) => {\r\n      tooltip.style.top = `${calcYShift( event )}px`;\r\n      tooltip.style.left = `${calcXShift( event )}px`;\r\n    };\r\n\r\n    const toggleTooltipVisibility = () => {\r\n      const visibilityClass = 'tooltip--visible';\r\n      tooltip.classList.toggle( visibilityClass );\r\n      if ( !tooltip.classList.contains( visibilityClass ) ) {\r\n        tooltip.removeAttribute( 'style' );\r\n      }\r\n    };\r\n\r\n    const setTooltipArrowClass = () => {\r\n      tooltip.classList.add( `tooltip--${element.dataset.position}` );\r\n    };\r\n\r\n    const removeTooltipArrowClass = () => {\r\n      tooltip.removeAttribute( 'class' );\r\n      tooltip.classList.add( 'tooltip' );\r\n    };\r\n\r\n    const mouseEnterHandler = ( event ) => {\r\n      tooltip.textContent = tooltippedElement.dataset.title;\r\n      setTooltipPosition( event );\r\n      setTooltipArrowClass();\r\n      toggleTooltipVisibility();\r\n    };\r\n\r\n    const mouseLeaveHandler = () => {\r\n      toggleTooltipVisibility();\r\n      removeTooltipArrowClass();\r\n    };\r\n\r\n    const windowResizeHandler = () => {\r\n      tooltippedElementRect = tooltippedElement.getBoundingClientRect();\r\n    };\r\n\r\n    tooltippedElement.addEventListener( 'mouseenter', mouseEnterHandler );\r\n    tooltippedElement.addEventListener( 'focus', mouseEnterHandler );\r\n    tooltippedElement.addEventListener( 'mouseleave', mouseLeaveHandler );\r\n    tooltippedElement.addEventListener( 'blur', mouseLeaveHandler );\r\n\r\n    window.addEventListener( 'resize', windowResizeHandler );\r\n  }\r\n}\r\n\r\nexport default Tooltip;\r\n","import Tooltip from './Tooltip.js';\r\n// let tooltip = new Tooltip();\r\n"],"names":["Tooltip","tooltipSelector","tooltippedElements","document","querySelectorAll","tooltip","createTooltip","tooltipBox","createElement","classList","add","body","appendChild","copyLabels","forEach","element","hasAttribute","title","getAttribute","setAttribute","dataset","position","getTooltipPosition","getTooltipDimensions","bindElementEvents","tooltipText","tooltipDimensions","textContent","offsetWidth","offsetHeight","tooltippedElementRect","verticalTooltipPosition","top","height","horizontalTooltipPosition","left","width","tooltippedElement","getBoundingClientRect","tooltipPosition","getVerticalTooltipPosition","getHorizontalTooltipPosition","join","split","calcXShift","event","xShift","clientWidth","calcYShift","yShift","clientHeight","bottom","setTooltipPosition","style","toggleTooltipVisibility","visibilityClass","toggle","contains","removeAttribute","setTooltipArrowClass","removeTooltipArrowClass","mouseEnterHandler","mouseLeaveHandler","windowResizeHandler","addEventListener"],"mappings":"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"}