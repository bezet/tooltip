{"version":3,"file":"tooltip.js","sources":["../src/Tooltip.js","../src/main.js"],"sourcesContent":["class Tooltip {\r\n  constructor( tooltipSelector = 'a' ) {\r\n    this.tooltippedElements = document.querySelectorAll( tooltipSelector );\r\n    this.tooltip = null;\r\n    this.createTooltip();\r\n  }\r\n\r\n  createTooltip() {\r\n    const tooltipBox = document.createElement( 'span' );\r\n    tooltipBox.classList.add( 'tooltip' );\r\n    document.body.appendChild( tooltipBox );\r\n\r\n    this.tooltip = tooltipBox;\r\n\r\n    this.copyLabels();\r\n  }\r\n\r\n  copyLabels() {\r\n    [ ...this.tooltippedElements ].forEach( ( element ) => {\r\n      if ( element.hasAttribute( 'title' ) ) {\r\n        const title = element.getAttribute( 'title' );\r\n\r\n        // TODO: Provide WAI-ARIA support\r\n        if ( title !== '' ) {\r\n          element.setAttribute( 'title', '' );\r\n          element.dataset.title = title;\r\n          this.bindEvents( element );\r\n        }\r\n      }\r\n    } );\r\n  }\r\n\r\n  bindEvents( element ) {\r\n    const tooltippedElement = element;\r\n    const tooltip = this.tooltip;\r\n\r\n    // const inViewport = ( elementRect ) => {\r\n    //   return elementRect.top > 40;\r\n    // };\r\n\r\n    const calcXShift = ( event ) => {\r\n      return event.pageX - ( tooltip.clientWidth / 2 );\r\n    };\r\n\r\n    const calcYShift = ( event ) => {\r\n      const tooltippedElementRect = tooltippedElement.getBoundingClientRect();\r\n      const tooltippedElementStyles = window.getComputedStyle( tooltippedElement );\r\n\r\n      // console.log( tooltippedElementRect );\r\n\r\n      let yShift = -( tooltip.clientHeight + 10 );\r\n\r\n      if ( tooltippedElementStyles.getPropertyValue( 'display' ) !== 'block' ) {\r\n        yShift += tooltippedElementRect.top;\r\n      } else {\r\n        yShift += event.pageY;\r\n      }\r\n\r\n      return yShift;\r\n    };\r\n\r\n    tooltippedElement.addEventListener( 'mouseover', ( event ) => {\r\n      tooltip.textContent = tooltippedElement.dataset.title;\r\n\r\n      tooltip.style.top = `${calcYShift( event )}px`;\r\n      tooltip.style.left = `${calcXShift( event )}px`;\r\n\r\n      tooltip.classList.add( 'tooltip--visible' );\r\n    } );\r\n\r\n    tooltippedElement.addEventListener( 'mousemove', ( event ) => {\r\n      tooltip.style.top = `${calcYShift( event )}px`;\r\n      tooltip.style.left = `${calcXShift( event )}px`;\r\n    } );\r\n\r\n    tooltippedElement.addEventListener( 'mouseleave', () => {\r\n      tooltip.classList.remove( 'tooltip--visible' );\r\n      tooltip.removeAttribute( 'style' );\r\n    } );\r\n  }\r\n}\r\n\r\nexport default Tooltip;\r\n","import Tooltip from './Tooltip.js';\r\n// let tooltip = new Tooltip();\r\n"],"names":["Tooltip","tooltipSelector","tooltippedElements","document","querySelectorAll","tooltip","createTooltip","tooltipBox","createElement","classList","add","body","appendChild","copyLabels","forEach","element","hasAttribute","title","getAttribute","setAttribute","dataset","bindEvents","tooltippedElement","calcXShift","event","pageX","clientWidth","calcYShift","tooltippedElementRect","getBoundingClientRect","tooltippedElementStyles","window","getComputedStyle","yShift","clientHeight","getPropertyValue","top","pageY","addEventListener","textContent","style","left","remove","removeAttribute"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA;qBACiC;QAAxBC,eAAwB,uEAAN,GAAM;;;SAC9BC,kBAAL,GAA0BC,SAASC,gBAAT,CAA2BH,eAA3B,CAA1B;SACKI,OAAL,GAAe,IAAf;SACKC,aAAL;;;;;oCAGc;UACRC,aAAaJ,SAASK,aAAT,CAAwB,MAAxB,CAAnB;iBACWC,SAAX,CAAqBC,GAArB,CAA0B,SAA1B;eACSC,IAAT,CAAcC,WAAd,CAA2BL,UAA3B;;WAEKF,OAAL,GAAeE,UAAf;;WAEKM,UAAL;;;;iCAGW;;;kCACN,KAAKX,kBAAV,GAA+BY,OAA/B,CAAwC,UAAEC,OAAF,EAAe;YAChDA,QAAQC,YAAR,CAAsB,OAAtB,CAAL,EAAuC;cAC/BC,QAAQF,QAAQG,YAAR,CAAsB,OAAtB,CAAd;;;cAGKD,UAAU,EAAf,EAAoB;oBACVE,YAAR,CAAsB,OAAtB,EAA+B,EAA/B;oBACQC,OAAR,CAAgBH,KAAhB,GAAwBA,KAAxB;kBACKI,UAAL,CAAiBN,OAAjB;;;OARN;;;;+BAcUA,SAAU;UACdO,oBAAoBP,OAA1B;UACMV,UAAU,KAAKA,OAArB;;;;;;UAMMkB,aAAa,SAAbA,UAAa,CAAEC,KAAF,EAAa;eACvBA,MAAMC,KAAN,GAAgBpB,QAAQqB,WAAR,GAAsB,CAA7C;OADF;;UAIMC,aAAa,SAAbA,UAAa,CAAEH,KAAF,EAAa;YACxBI,wBAAwBN,kBAAkBO,qBAAlB,EAA9B;YACMC,0BAA0BC,OAAOC,gBAAP,CAAyBV,iBAAzB,CAAhC;;;;YAIIW,SAAS,EAAG5B,QAAQ6B,YAAR,GAAuB,EAA1B,CAAb;;YAEKJ,wBAAwBK,gBAAxB,CAA0C,SAA1C,MAA0D,OAA/D,EAAyE;oBAC7DP,sBAAsBQ,GAAhC;SADF,MAEO;oBACKZ,MAAMa,KAAhB;;;eAGKJ,MAAP;OAdF;;wBAiBkBK,gBAAlB,CAAoC,WAApC,EAAiD,UAAEd,KAAF,EAAa;gBACpDe,WAAR,GAAsBjB,kBAAkBF,OAAlB,CAA0BH,KAAhD;;gBAEQuB,KAAR,CAAcJ,GAAd,GAAuBT,WAAYH,KAAZ,CAAvB;gBACQgB,KAAR,CAAcC,IAAd,GAAwBlB,WAAYC,KAAZ,CAAxB;;gBAEQf,SAAR,CAAkBC,GAAlB,CAAuB,kBAAvB;OANF;;wBASkB4B,gBAAlB,CAAoC,WAApC,EAAiD,UAAEd,KAAF,EAAa;gBACpDgB,KAAR,CAAcJ,GAAd,GAAuBT,WAAYH,KAAZ,CAAvB;gBACQgB,KAAR,CAAcC,IAAd,GAAwBlB,WAAYC,KAAZ,CAAxB;OAFF;;wBAKkBc,gBAAlB,CAAoC,YAApC,EAAkD,YAAM;gBAC9C7B,SAAR,CAAkBiC,MAAlB,CAA0B,kBAA1B;gBACQC,eAAR,CAAyB,OAAzB;OAFF;;;;IAOJ;;ACjFA"}