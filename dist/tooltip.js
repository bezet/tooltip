(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["Tooltip"] = factory();
	else
		root["Tooltip"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Tooltip = function () {\n  function Tooltip() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Tooltip);\n\n    this.settings = {\n      selector: 'a',\n      tooltipClass: 'tooltip',\n      margin: 10,\n      position: 'top-center'\n    };\n\n    Object.keys(options).forEach(function (option) {\n      _this.settings[option] = options[option];\n    });\n\n    this.tooltippedElements = document.querySelectorAll(this.settings.selector);\n\n    this.createTooltip();\n  }\n\n  _createClass(Tooltip, [{\n    key: 'getDesiredPosition',\n    value: function getDesiredPosition(element) {\n      var posSplit = element.dataset.position.split('-');\n\n      // for centered position only one alignment might be provided,\n      // eg. top === top-center\n      if (posSplit.length < 2) {\n        posSplit.push('center');\n      }\n\n      return {\n        side: posSplit[0],\n        alignment: posSplit[1]\n      };\n    }\n  }, {\n    key: 'resetClass',\n    value: function resetClass() {\n      this.tooltip.removeAttribute('class');\n      this.tooltip.classList.add(this.settings.tooltipClass);\n    }\n  }, {\n    key: 'setClass',\n    value: function setClass(tooltipPosition) {\n      this.tooltip.classList.add(this.settings.tooltipClass + '--' + tooltipPosition);\n    }\n  }, {\n    key: 'setTooltipVisibility',\n    value: function setTooltipVisibility() {\n      var visibilityClass = this.settings.tooltipClass + '--visible';\n\n      if (!this.tooltip.classList.contains(visibilityClass)) {\n        this.tooltip.classList.add(visibilityClass);\n      } else {\n        this.tooltip.classList.remove(visibilityClass);\n      }\n\n      if (!this.tooltip.classList.contains(visibilityClass)) {\n        this.tooltip.removeAttribute('style');\n        this.resetClass();\n      }\n    }\n  }, {\n    key: 'calcCoordinates',\n    value: function calcCoordinates(elementRect, position) {\n      var tooltipBounding = this.tooltip.getBoundingClientRect();\n      var elementBounding = elementRect;\n      var pageScroll = Tooltip.getScroll();\n\n      var coordinates = {\n        x: pageScroll.x,\n        y: pageScroll.y\n      };\n\n      // top & bottom\n\n      if (position.side === 'top' || position.side === 'bottom') {\n        if (position.alignment === 'start') {\n          coordinates.x += elementBounding.left;\n        }\n\n        if (position.alignment === 'center') {\n          coordinates.x += elementBounding.left + (elementBounding.width / 2 - tooltipBounding.width / 2);\n        }\n\n        if (position.alignment === 'end') {\n          coordinates.x += elementBounding.right - tooltipBounding.width;\n        }\n      }\n\n      if (position.side === 'top') {\n        coordinates.y += elementBounding.top - tooltipBounding.height - this.settings.margin;\n      }\n\n      if (position.side === 'bottom') {\n        coordinates.y += elementBounding.bottom + this.settings.margin;\n      }\n\n      // left & right\n\n      if (position.side === 'left' || position.side === 'right') {\n        if (position.alignment === 'start') {\n          coordinates.y += elementBounding.top;\n        }\n\n        if (position.alignment === 'center') {\n          coordinates.y += elementBounding.top + (elementBounding.height / 2 - tooltipBounding.height / 2);\n        }\n\n        if (position.alignment === 'end') {\n          coordinates.y += elementBounding.bottom - tooltipBounding.height;\n        }\n      }\n\n      if (position.side === 'left') {\n        coordinates.x += elementBounding.left - this.settings.margin - tooltipBounding.width;\n      }\n\n      if (position.side === 'right') {\n        coordinates.x += elementBounding.right + this.settings.margin;\n      }\n\n      return coordinates;\n    }\n  }, {\n    key: 'checkVerticalSpace',\n    value: function checkVerticalSpace(elementBounding) {\n      var topSpace = elementBounding.top - this.settings.margin;\n      var bottomSpace = window.innerHeight - (elementBounding.bottom + this.settings.margin);\n\n      return {\n        start: topSpace > this.tooltip.offsetHeight,\n        end: bottomSpace > this.tooltip.offsetHeight\n      };\n    }\n  }, {\n    key: 'checkHorizontalSpace',\n    value: function checkHorizontalSpace(elementBounding) {\n      var leftSpace = elementBounding.left - this.settings.margin;\n      var rightSpace = window.innerWidth - (elementBounding.right + this.settings.margin);\n\n      return {\n        start: leftSpace > this.tooltip.offsetWidth,\n        end: rightSpace > this.tooltip.offsetWidth\n      };\n    }\n\n    // check space on sides in the viewport\n\n  }, {\n    key: 'getPossibleSides',\n    value: function getPossibleSides(elementBounding) {\n      return {\n        vertical: this.checkVerticalSpace(elementBounding),\n        horizontal: this.checkHorizontalSpace(elementBounding)\n      };\n    }\n\n    // compare desired position & possible space on sides;\n    // if desired is not possible, return best possible position\n\n  }, {\n    key: 'getActualPosition',\n    value: function getActualPosition(desired, possible) {\n      var positionMap = {\n        top: 'start',\n        bottom: 'end',\n        left: 'start',\n        right: 'end'\n      };\n\n      var oppositeMap = {\n        top: 'bottom',\n        bottom: 'top',\n        left: 'right',\n        right: 'left',\n        vertical: 'horizontal',\n        horizontal: 'vertical'\n      };\n\n      var axis = desired.side === 'top' || desired.side === 'bottom' ? 'vertical' : 'horizontal';\n\n      var getSide = function getSide(wantedAxis, wantedSide) {\n        var theAxis = possible[wantedAxis];\n        var side = void 0;\n\n        if (theAxis[positionMap[wantedSide]]) {\n          side = wantedSide;\n        } else if (theAxis[positionMap[oppositeMap[wantedSide]]]) {\n          side = oppositeMap[wantedSide];\n        } else {\n          side = getSide(oppositeMap[wantedAxis], wantedSide);\n        }\n\n        return side;\n      };\n\n      var getAlignment = function getAlignment(wantedAxis, wantedAlignment) {\n        var possibleAlign = possible[wantedAxis];\n        var alignment = void 0;\n\n        if (possibleAlign.start && possibleAlign.end) {\n          alignment = wantedAlignment;\n        } else if (!possibleAlign.start && !possibleAlign.end) {\n          alignment = 'center';\n        } else if (!possibleAlign.start) {\n          alignment = 'start';\n        } else if (!possibleAlign.end) {\n          alignment = 'end';\n        }\n\n        return alignment;\n      };\n\n      return {\n        side: getSide(axis, desired.side),\n        alignment: getAlignment(oppositeMap[axis], desired.alignment)\n      };\n    }\n  }, {\n    key: 'setTooltipPosition',\n    value: function setTooltipPosition(element) {\n      var elementRect = element.getBoundingClientRect();\n      var desiredPosition = this.getDesiredPosition(element);\n      var possibleSides = this.getPossibleSides(elementRect);\n      var actualPosition = this.getActualPosition(desiredPosition, possibleSides);\n      var coordinates = this.calcCoordinates(elementRect, actualPosition);\n\n      this.tooltip.style.left = coordinates.x + 'px';\n      this.tooltip.style.top = coordinates.y + 'px';\n\n      this.setClass(actualPosition.side + '-' + actualPosition.alignment);\n    }\n  }, {\n    key: 'setTooltipContent',\n    value: function setTooltipContent(content) {\n      this.tooltip.textContent = content;\n    }\n  }, {\n    key: 'mouseEnterHandler',\n    value: function mouseEnterHandler(event) {\n      var element = event.currentTarget;\n\n      this.setTooltipContent(element.dataset.tooltip);\n      this.setTooltipPosition(element);\n      this.setTooltipVisibility();\n    }\n  }, {\n    key: 'mouseLeaveHandler',\n    value: function mouseLeaveHandler() {\n      this.setTooltipVisibility();\n    }\n  }, {\n    key: 'bindElementEvents',\n    value: function bindElementEvents(element) {\n      var _this2 = this;\n\n      element.addEventListener('mouseenter', function (event) {\n        return _this2.mouseEnterHandler(event);\n      });\n      element.addEventListener('focus', function (event) {\n        return _this2.mouseEnterHandler(event);\n      });\n\n      element.addEventListener('mouseleave', function (event) {\n        return _this2.mouseLeaveHandler(event);\n      });\n      element.addEventListener('blur', function (event) {\n        return _this2.mouseLeaveHandler(event);\n      });\n    }\n  }, {\n    key: 'createTooltipData',\n    value: function createTooltipData() {\n      var _this3 = this;\n\n      [].concat(_toConsumableArray(this.tooltippedElements)).forEach(function (el) {\n        var element = el;\n        var elementHas = Tooltip.elHasNonEmptyAttr(element);\n\n        if (elementHas('title') && !elementHas('data-tooltip')) {\n          element.dataset.tooltip = element.getAttribute('title');\n          element.setAttribute('title', '');\n        }\n\n        if (!elementHas('data-position')) {\n          element.dataset.position = _this3.settings.position;\n        }\n\n        if (elementHas('data-tooltip')) {\n          _this3.bindElementEvents(element);\n        }\n      });\n    }\n  }, {\n    key: 'createTooltip',\n    value: function createTooltip() {\n      var tooltip = document.createElement('div');\n      tooltip.classList.add(this.settings.tooltipClass);\n      document.body.appendChild(tooltip);\n\n      this.tooltip = tooltip;\n      this.createTooltipData();\n    }\n  }], [{\n    key: 'elHasNonEmptyAttr',\n    value: function elHasNonEmptyAttr(el) {\n      return function (attr) {\n        return el.hasAttribute(attr) && el.getAttribute(attr) !== '';\n      };\n    }\n  }, {\n    key: 'getScroll',\n    value: function getScroll() {\n      var scroll = {};\n\n      scroll.x = window.pageXOffset !== undefined ? window.pageXOffset : (document.documentElement || document.body.parentNode || document.body).scrollLeft;\n\n      scroll.y = window.pageYOffset !== undefined ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop;\n\n      return scroll;\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexports.default = Tooltip;\nmodule.exports = exports['default'];//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdG9vbHRpcC5qcz9jOTllIl0sIm5hbWVzIjpbIlRvb2x0aXAiLCJvcHRpb25zIiwic2V0dGluZ3MiLCJzZWxlY3RvciIsInRvb2x0aXBDbGFzcyIsIm1hcmdpbiIsInBvc2l0aW9uIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJvcHRpb24iLCJ0b29sdGlwcGVkRWxlbWVudHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjcmVhdGVUb29sdGlwIiwiZWxlbWVudCIsInBvc1NwbGl0IiwiZGF0YXNldCIsInNwbGl0IiwibGVuZ3RoIiwicHVzaCIsInNpZGUiLCJhbGlnbm1lbnQiLCJ0b29sdGlwIiwicmVtb3ZlQXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwidG9vbHRpcFBvc2l0aW9uIiwidmlzaWJpbGl0eUNsYXNzIiwiY29udGFpbnMiLCJyZW1vdmUiLCJyZXNldENsYXNzIiwiZWxlbWVudFJlY3QiLCJ0b29sdGlwQm91bmRpbmciLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJlbGVtZW50Qm91bmRpbmciLCJwYWdlU2Nyb2xsIiwiZ2V0U2Nyb2xsIiwiY29vcmRpbmF0ZXMiLCJ4IiwieSIsImxlZnQiLCJ3aWR0aCIsInJpZ2h0IiwidG9wIiwiaGVpZ2h0IiwiYm90dG9tIiwidG9wU3BhY2UiLCJib3R0b21TcGFjZSIsIndpbmRvdyIsImlubmVySGVpZ2h0Iiwic3RhcnQiLCJvZmZzZXRIZWlnaHQiLCJlbmQiLCJsZWZ0U3BhY2UiLCJyaWdodFNwYWNlIiwiaW5uZXJXaWR0aCIsIm9mZnNldFdpZHRoIiwidmVydGljYWwiLCJjaGVja1ZlcnRpY2FsU3BhY2UiLCJob3Jpem9udGFsIiwiY2hlY2tIb3Jpem9udGFsU3BhY2UiLCJkZXNpcmVkIiwicG9zc2libGUiLCJwb3NpdGlvbk1hcCIsIm9wcG9zaXRlTWFwIiwiYXhpcyIsImdldFNpZGUiLCJ3YW50ZWRBeGlzIiwid2FudGVkU2lkZSIsInRoZUF4aXMiLCJnZXRBbGlnbm1lbnQiLCJ3YW50ZWRBbGlnbm1lbnQiLCJwb3NzaWJsZUFsaWduIiwiZGVzaXJlZFBvc2l0aW9uIiwiZ2V0RGVzaXJlZFBvc2l0aW9uIiwicG9zc2libGVTaWRlcyIsImdldFBvc3NpYmxlU2lkZXMiLCJhY3R1YWxQb3NpdGlvbiIsImdldEFjdHVhbFBvc2l0aW9uIiwiY2FsY0Nvb3JkaW5hdGVzIiwic3R5bGUiLCJzZXRDbGFzcyIsImNvbnRlbnQiLCJ0ZXh0Q29udGVudCIsImV2ZW50IiwiY3VycmVudFRhcmdldCIsInNldFRvb2x0aXBDb250ZW50Iiwic2V0VG9vbHRpcFBvc2l0aW9uIiwic2V0VG9vbHRpcFZpc2liaWxpdHkiLCJhZGRFdmVudExpc3RlbmVyIiwibW91c2VFbnRlckhhbmRsZXIiLCJtb3VzZUxlYXZlSGFuZGxlciIsImVsIiwiZWxlbWVudEhhcyIsImVsSGFzTm9uRW1wdHlBdHRyIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiYmluZEVsZW1lbnRFdmVudHMiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwiY3JlYXRlVG9vbHRpcERhdGEiLCJhdHRyIiwiaGFzQXR0cmlidXRlIiwic2Nyb2xsIiwicGFnZVhPZmZzZXQiLCJ1bmRlZmluZWQiLCJkb2N1bWVudEVsZW1lbnQiLCJwYXJlbnROb2RlIiwic2Nyb2xsTGVmdCIsInBhZ2VZT2Zmc2V0Iiwic2Nyb2xsVG9wIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7SUFBTUEsTztBQUNKLHFCQUEwQjtBQUFBOztBQUFBLFFBQWRDLE9BQWMsdUVBQUosRUFBSTs7QUFBQTs7QUFDeEIsU0FBS0MsUUFBTCxHQUFnQjtBQUNkQyxnQkFBVSxHQURJO0FBRWRDLG9CQUFjLFNBRkE7QUFHZEMsY0FBUSxFQUhNO0FBSWRDLGdCQUFVO0FBSkksS0FBaEI7O0FBT0FDLFdBQU9DLElBQVAsQ0FBWVAsT0FBWixFQUFxQlEsT0FBckIsQ0FBNkIsVUFBQ0MsTUFBRCxFQUFZO0FBQ3ZDLFlBQUtS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VCxDQUF1QixLQUF2QixDQUFoQjtBQUNBNUUsY0FBUUUsU0FBUixDQUFrQkMsR0FBbEIsQ0FBc0IsS0FBS3hCLFFBQUwsQ0FBY0UsWUFBcEM7QUFDQVEsZUFBU3dGLElBQVQsQ0FBY0MsV0FBZCxDQUEwQjlFLE9BQTFCOztBQUVBLFdBQUtBLE9BQUwsR0FBZUEsT0FBZjtBQUNBLFdBQUsrRSxpQkFBTDtBQUNEOzs7c0NBdFJ3QlQsRSxFQUFJO0FBQzNCLGFBQU8sVUFBQ1UsSUFBRCxFQUFVO0FBQ2YsZUFBT1YsR0FBR1csWUFBSCxDQUFnQkQsSUFBaEIsS0FDQVYsR0FBR0csWUFBSCxDQUFnQk8sSUFBaEIsTUFBMEIsRUFEakM7QUFFRCxPQUhEO0FBSUQ7OztnQ0FFa0I7QUFDakIsVUFBTUUsU0FBUyxFQUFmOztBQUVBQSxhQUFPbEUsQ0FBUCxHQUFZVSxPQUFPeUQsV0FBUCxLQUF1QkMsU0FBeEIsR0FDVDFELE9BQU95RCxXQURFLEdBRVQsQ0FBQzlGLFNBQVNnRyxlQUFULElBQTRCaEcsU0FBU3dGLElBQVQsQ0FBY1MsVUFBMUMsSUFBd0RqRyxTQUFTd0YsSUFBbEUsRUFBd0VVLFVBRjFFOztBQUlBTCxhQUFPakUsQ0FBUCxHQUFZUyxPQUFPOEQsV0FBUCxLQUF1QkosU0FBeEIsR0FDVDFELE9BQU84RCxXQURFLEdBRVQsQ0FBQ25HLFNBQVNnRyxlQUFULElBQTRCaEcsU0FBU3dGLElBQVQsQ0FBY1MsVUFBMUMsSUFBd0RqRyxTQUFTd0YsSUFBbEUsRUFBd0VZLFNBRjFFOztBQUlBLGFBQU9QLE1BQVA7QUFDRDs7Ozs7O2tCQXNRWXpHLE8iLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFRvb2x0aXAge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLnNldHRpbmdzID0ge1xuICAgICAgc2VsZWN0b3I6ICdhJyxcbiAgICAgIHRvb2x0aXBDbGFzczogJ3Rvb2x0aXAnLFxuICAgICAgbWFyZ2luOiAxMCxcbiAgICAgIHBvc2l0aW9uOiAndG9wLWNlbnRlcicsXG4gICAgfTtcblxuICAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goKG9wdGlvbikgPT4ge1xuICAgICAgdGhpcy5zZXR0aW5nc1tvcHRpb25dID0gb3B0aW9uc1tvcHRpb25dO1xuICAgIH0pO1xuXG4gICAgdGhpcy50b29sdGlwcGVkRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuc2V0dGluZ3Muc2VsZWN0b3IpO1xuXG4gICAgdGhpcy5jcmVhdGVUb29sdGlwKCk7XG4gIH1cblxuICBzdGF0aWMgZWxIYXNOb25FbXB0eUF0dHIoZWwpIHtcbiAgICByZXR1cm4gKGF0dHIpID0+IHtcbiAgICAgIHJldHVybiBlbC5oYXNBdHRyaWJ1dGUoYXR0cikgJiZcbiAgICAgICAgICAgICBlbC5nZXRBdHRyaWJ1dGUoYXR0cikgIT09ICcnO1xuICAgIH07XG4gIH1cblxuICBzdGF0aWMgZ2V0U2Nyb2xsKCkge1xuICAgIGNvbnN0IHNjcm9sbCA9IHt9O1xuXG4gICAgc2Nyb2xsLnggPSAod2luZG93LnBhZ2VYT2Zmc2V0ICE9PSB1bmRlZmluZWQpID9cbiAgICAgIHdpbmRvdy5wYWdlWE9mZnNldCA6XG4gICAgICAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxMZWZ0O1xuXG4gICAgc2Nyb2xsLnkgPSAod2luZG93LnBhZ2VZT2Zmc2V0ICE9PSB1bmRlZmluZWQpID9cbiAgICAgIHdpbmRvdy5wYWdlWU9mZnNldCA6XG4gICAgICAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5KS5zY3JvbGxUb3A7XG5cbiAgICByZXR1cm4gc2Nyb2xsO1xuICB9XG5cbiAgZ2V0RGVzaXJlZFBvc2l0aW9uKGVsZW1lbnQpIHtcbiAgICBjb25zdCBwb3NTcGxpdCA9IGVsZW1lbnQuZGF0YXNldC5wb3NpdGlvbi5zcGxpdCgnLScpO1xuXG4gICAgLy8gZm9yIGNlbnRlcmVkIHBvc2l0aW9uIG9ubHkgb25lIGFsaWdubWVudCBtaWdodCBiZSBwcm92aWRlZCxcbiAgICAvLyBlZy4gdG9wID09PSB0b3AtY2VudGVyXG4gICAgaWYgKHBvc1NwbGl0Lmxlbmd0aCA8IDIpIHtcbiAgICAgIHBvc1NwbGl0LnB1c2goJ2NlbnRlcicpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzaWRlOiBwb3NTcGxpdFswXSxcbiAgICAgIGFsaWdubWVudDogcG9zU3BsaXRbMV1cbiAgICB9O1xuICB9XG5cbiAgcmVzZXRDbGFzcygpIHtcbiAgICB0aGlzLnRvb2x0aXAucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuICAgIHRoaXMudG9vbHRpcC5jbGFzc0xpc3QuYWRkKHRoaXMuc2V0dGluZ3MudG9vbHRpcENsYXNzKTtcbiAgfVxuXG4gIHNldENsYXNzKHRvb2x0aXBQb3NpdGlvbikge1xuICAgIHRoaXMudG9vbHRpcC5jbGFzc0xpc3QuYWRkKGAke3RoaXMuc2V0dGluZ3MudG9vbHRpcENsYXNzfS0tJHt0b29sdGlwUG9zaXRpb259YCk7XG4gIH1cblxuICBzZXRUb29sdGlwVmlzaWJpbGl0eSgpIHtcbiAgICBjb25zdCB2aXNpYmlsaXR5Q2xhc3MgPSBgJHt0aGlzLnNldHRpbmdzLnRvb2x0aXBDbGFzc30tLXZpc2libGVgO1xuXG4gICAgaWYgKCF0aGlzLnRvb2x0aXAuY2xhc3NMaXN0LmNvbnRhaW5zKHZpc2liaWxpdHlDbGFzcykpIHtcbiAgICAgIHRoaXMudG9vbHRpcC5jbGFzc0xpc3QuYWRkKHZpc2liaWxpdHlDbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudG9vbHRpcC5jbGFzc0xpc3QucmVtb3ZlKHZpc2liaWxpdHlDbGFzcyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnRvb2x0aXAuY2xhc3NMaXN0LmNvbnRhaW5zKHZpc2liaWxpdHlDbGFzcykpIHtcbiAgICAgIHRoaXMudG9vbHRpcC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4gICAgICB0aGlzLnJlc2V0Q2xhc3MoKTtcbiAgICB9XG4gIH1cblxuICBjYWxjQ29vcmRpbmF0ZXMoZWxlbWVudFJlY3QsIHBvc2l0aW9uKSB7XG4gICAgY29uc3QgdG9vbHRpcEJvdW5kaW5nID0gdGhpcy50b29sdGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGVsZW1lbnRCb3VuZGluZyA9IGVsZW1lbnRSZWN0O1xuICAgIGNvbnN0IHBhZ2VTY3JvbGwgPSBUb29sdGlwLmdldFNjcm9sbCgpO1xuXG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSB7XG4gICAgICB4OiBwYWdlU2Nyb2xsLngsXG4gICAgICB5OiBwYWdlU2Nyb2xsLnlcbiAgICB9O1xuXG4gICAgLy8gdG9wICYgYm90dG9tXG5cbiAgICBpZiAoKHBvc2l0aW9uLnNpZGUgPT09ICd0b3AnIHx8IHBvc2l0aW9uLnNpZGUgPT09ICdib3R0b20nKSkge1xuICAgICAgaWYgKHBvc2l0aW9uLmFsaWdubWVudCA9PT0gJ3N0YXJ0Jykge1xuICAgICAgICBjb29yZGluYXRlcy54ICs9IGVsZW1lbnRCb3VuZGluZy5sZWZ0O1xuICAgICAgfVxuXG4gICAgICBpZiAocG9zaXRpb24uYWxpZ25tZW50ID09PSAnY2VudGVyJykge1xuICAgICAgICBjb29yZGluYXRlcy54ICs9XG4gICAgICAgICAgZWxlbWVudEJvdW5kaW5nLmxlZnQgK1xuICAgICAgICAgICgoZWxlbWVudEJvdW5kaW5nLndpZHRoIC8gMikgLSAodG9vbHRpcEJvdW5kaW5nLndpZHRoIC8gMikpO1xuICAgICAgfVxuXG4gICAgICBpZiAocG9zaXRpb24uYWxpZ25tZW50ID09PSAnZW5kJykge1xuICAgICAgICBjb29yZGluYXRlcy54ICs9IChlbGVtZW50Qm91bmRpbmcucmlnaHQgLSB0b29sdGlwQm91bmRpbmcud2lkdGgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbi5zaWRlID09PSAndG9wJykge1xuICAgICAgY29vcmRpbmF0ZXMueSArPSAoZWxlbWVudEJvdW5kaW5nLnRvcCAtIHRvb2x0aXBCb3VuZGluZy5oZWlnaHQgLSB0aGlzLnNldHRpbmdzLm1hcmdpbik7XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uLnNpZGUgPT09ICdib3R0b20nKSB7XG4gICAgICBjb29yZGluYXRlcy55ICs9IChlbGVtZW50Qm91bmRpbmcuYm90dG9tICsgdGhpcy5zZXR0aW5ncy5tYXJnaW4pO1xuICAgIH1cblxuICAgIC8vIGxlZnQgJiByaWdodFxuXG4gICAgaWYgKChwb3NpdGlvbi5zaWRlID09PSAnbGVmdCcgfHwgcG9zaXRpb24uc2lkZSA9PT0gJ3JpZ2h0JykpIHtcbiAgICAgIGlmIChwb3NpdGlvbi5hbGlnbm1lbnQgPT09ICdzdGFydCcpIHtcbiAgICAgICAgY29vcmRpbmF0ZXMueSArPSBlbGVtZW50Qm91bmRpbmcudG9wO1xuICAgICAgfVxuXG4gICAgICBpZiAocG9zaXRpb24uYWxpZ25tZW50ID09PSAnY2VudGVyJykge1xuICAgICAgICBjb29yZGluYXRlcy55ICs9XG4gICAgICAgICAgZWxlbWVudEJvdW5kaW5nLnRvcCArXG4gICAgICAgICAgKChlbGVtZW50Qm91bmRpbmcuaGVpZ2h0IC8gMikgLSAodG9vbHRpcEJvdW5kaW5nLmhlaWdodCAvIDIpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBvc2l0aW9uLmFsaWdubWVudCA9PT0gJ2VuZCcpIHtcbiAgICAgICAgY29vcmRpbmF0ZXMueSArPSBlbGVtZW50Qm91bmRpbmcuYm90dG9tIC0gdG9vbHRpcEJvdW5kaW5nLmhlaWdodDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24uc2lkZSA9PT0gJ2xlZnQnKSB7XG4gICAgICBjb29yZGluYXRlcy54ICs9IChlbGVtZW50Qm91bmRpbmcubGVmdCAtIHRoaXMuc2V0dGluZ3MubWFyZ2luIC0gdG9vbHRpcEJvdW5kaW5nLndpZHRoKTtcbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24uc2lkZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgY29vcmRpbmF0ZXMueCArPSAoZWxlbWVudEJvdW5kaW5nLnJpZ2h0ICsgdGhpcy5zZXR0aW5ncy5tYXJnaW4pO1xuICAgIH1cblxuICAgIHJldHVybiBjb29yZGluYXRlcztcbiAgfVxuXG4gIGNoZWNrVmVydGljYWxTcGFjZShlbGVtZW50Qm91bmRpbmcpIHtcbiAgICBjb25zdCB0b3BTcGFjZSA9IChlbGVtZW50Qm91bmRpbmcudG9wIC0gdGhpcy5zZXR0aW5ncy5tYXJnaW4pO1xuICAgIGNvbnN0IGJvdHRvbVNwYWNlID0gd2luZG93LmlubmVySGVpZ2h0IC0gKGVsZW1lbnRCb3VuZGluZy5ib3R0b20gKyB0aGlzLnNldHRpbmdzLm1hcmdpbik7XG5cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnQ6IHRvcFNwYWNlID4gdGhpcy50b29sdGlwLm9mZnNldEhlaWdodCxcbiAgICAgIGVuZDogYm90dG9tU3BhY2UgPiB0aGlzLnRvb2x0aXAub2Zmc2V0SGVpZ2h0XG4gICAgfTtcbiAgfVxuXG4gIGNoZWNrSG9yaXpvbnRhbFNwYWNlKGVsZW1lbnRCb3VuZGluZykge1xuICAgIGNvbnN0IGxlZnRTcGFjZSA9IChlbGVtZW50Qm91bmRpbmcubGVmdCAtIHRoaXMuc2V0dGluZ3MubWFyZ2luKTtcbiAgICBjb25zdCByaWdodFNwYWNlID0gd2luZG93LmlubmVyV2lkdGggLSAoZWxlbWVudEJvdW5kaW5nLnJpZ2h0ICsgdGhpcy5zZXR0aW5ncy5tYXJnaW4pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiBsZWZ0U3BhY2UgPiB0aGlzLnRvb2x0aXAub2Zmc2V0V2lkdGgsXG4gICAgICBlbmQ6IHJpZ2h0U3BhY2UgPiB0aGlzLnRvb2x0aXAub2Zmc2V0V2lkdGhcbiAgICB9O1xuICB9XG5cbiAgLy8gY2hlY2sgc3BhY2Ugb24gc2lkZXMgaW4gdGhlIHZpZXdwb3J0XG4gIGdldFBvc3NpYmxlU2lkZXMoZWxlbWVudEJvdW5kaW5nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZlcnRpY2FsOiB0aGlzLmNoZWNrVmVydGljYWxTcGFjZShlbGVtZW50Qm91bmRpbmcpLFxuICAgICAgaG9yaXpvbnRhbDogdGhpcy5jaGVja0hvcml6b250YWxTcGFjZShlbGVtZW50Qm91bmRpbmcpXG4gICAgfTtcbiAgfVxuXG4gIC8vIGNvbXBhcmUgZGVzaXJlZCBwb3NpdGlvbiAmIHBvc3NpYmxlIHNwYWNlIG9uIHNpZGVzO1xuICAvLyBpZiBkZXNpcmVkIGlzIG5vdCBwb3NzaWJsZSwgcmV0dXJuIGJlc3QgcG9zc2libGUgcG9zaXRpb25cbiAgZ2V0QWN0dWFsUG9zaXRpb24oZGVzaXJlZCwgcG9zc2libGUpIHtcbiAgICBjb25zdCBwb3NpdGlvbk1hcCA9IHtcbiAgICAgIHRvcDogJ3N0YXJ0JyxcbiAgICAgIGJvdHRvbTogJ2VuZCcsXG4gICAgICBsZWZ0OiAnc3RhcnQnLFxuICAgICAgcmlnaHQ6ICdlbmQnLFxuICAgIH07XG5cbiAgICBjb25zdCBvcHBvc2l0ZU1hcCA9IHtcbiAgICAgIHRvcDogJ2JvdHRvbScsXG4gICAgICBib3R0b206ICd0b3AnLFxuICAgICAgbGVmdDogJ3JpZ2h0JyxcbiAgICAgIHJpZ2h0OiAnbGVmdCcsXG4gICAgICB2ZXJ0aWNhbDogJ2hvcml6b250YWwnLFxuICAgICAgaG9yaXpvbnRhbDogJ3ZlcnRpY2FsJyxcbiAgICB9O1xuXG4gICAgY29uc3QgYXhpcyA9IChcbiAgICAgIGRlc2lyZWQuc2lkZSA9PT0gJ3RvcCcgfHwgZGVzaXJlZC5zaWRlID09PSAnYm90dG9tJ1xuICAgICkgPyAndmVydGljYWwnIDogJ2hvcml6b250YWwnO1xuXG4gICAgY29uc3QgZ2V0U2lkZSA9ICh3YW50ZWRBeGlzLCB3YW50ZWRTaWRlKSA9PiB7XG4gICAgICBjb25zdCB0aGVBeGlzID0gcG9zc2libGVbd2FudGVkQXhpc107XG4gICAgICBsZXQgc2lkZTtcblxuICAgICAgaWYgKHRoZUF4aXNbcG9zaXRpb25NYXBbd2FudGVkU2lkZV1dKSB7XG4gICAgICAgIHNpZGUgPSB3YW50ZWRTaWRlO1xuICAgICAgfSBlbHNlIGlmICh0aGVBeGlzW3Bvc2l0aW9uTWFwW29wcG9zaXRlTWFwW3dhbnRlZFNpZGVdXV0pIHtcbiAgICAgICAgc2lkZSA9IG9wcG9zaXRlTWFwW3dhbnRlZFNpZGVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2lkZSA9IGdldFNpZGUob3Bwb3NpdGVNYXBbd2FudGVkQXhpc10sIHdhbnRlZFNpZGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2lkZTtcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0QWxpZ25tZW50ID0gKHdhbnRlZEF4aXMsIHdhbnRlZEFsaWdubWVudCkgPT4ge1xuICAgICAgY29uc3QgcG9zc2libGVBbGlnbiA9IHBvc3NpYmxlW3dhbnRlZEF4aXNdO1xuICAgICAgbGV0IGFsaWdubWVudDtcblxuICAgICAgaWYgKHBvc3NpYmxlQWxpZ24uc3RhcnQgJiYgcG9zc2libGVBbGlnbi5lbmQpIHtcbiAgICAgICAgYWxpZ25tZW50ID0gd2FudGVkQWxpZ25tZW50O1xuICAgICAgfSBlbHNlIGlmICghcG9zc2libGVBbGlnbi5zdGFydCAmJiAhcG9zc2libGVBbGlnbi5lbmQpIHtcbiAgICAgICAgYWxpZ25tZW50ID0gJ2NlbnRlcic7XG4gICAgICB9IGVsc2UgaWYgKCFwb3NzaWJsZUFsaWduLnN0YXJ0KSB7XG4gICAgICAgIGFsaWdubWVudCA9ICdzdGFydCc7XG4gICAgICB9IGVsc2UgaWYgKCFwb3NzaWJsZUFsaWduLmVuZCkge1xuICAgICAgICBhbGlnbm1lbnQgPSAnZW5kJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFsaWdubWVudDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNpZGU6IGdldFNpZGUoYXhpcywgZGVzaXJlZC5zaWRlKSxcbiAgICAgIGFsaWdubWVudDogZ2V0QWxpZ25tZW50KG9wcG9zaXRlTWFwW2F4aXNdLCBkZXNpcmVkLmFsaWdubWVudClcbiAgICB9O1xuICB9XG5cbiAgc2V0VG9vbHRpcFBvc2l0aW9uKGVsZW1lbnQpIHtcbiAgICBjb25zdCBlbGVtZW50UmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3QgZGVzaXJlZFBvc2l0aW9uID0gdGhpcy5nZXREZXNpcmVkUG9zaXRpb24oZWxlbWVudCk7XG4gICAgY29uc3QgcG9zc2libGVTaWRlcyA9IHRoaXMuZ2V0UG9zc2libGVTaWRlcyhlbGVtZW50UmVjdCk7XG4gICAgY29uc3QgYWN0dWFsUG9zaXRpb24gPSB0aGlzLmdldEFjdHVhbFBvc2l0aW9uKGRlc2lyZWRQb3NpdGlvbiwgcG9zc2libGVTaWRlcyk7XG4gICAgY29uc3QgY29vcmRpbmF0ZXMgPSB0aGlzLmNhbGNDb29yZGluYXRlcyhlbGVtZW50UmVjdCwgYWN0dWFsUG9zaXRpb24pO1xuXG4gICAgdGhpcy50b29sdGlwLnN0eWxlLmxlZnQgPSBgJHtjb29yZGluYXRlcy54fXB4YDtcbiAgICB0aGlzLnRvb2x0aXAuc3R5bGUudG9wID0gYCR7Y29vcmRpbmF0ZXMueX1weGA7XG5cbiAgICB0aGlzLnNldENsYXNzKGAke2FjdHVhbFBvc2l0aW9uLnNpZGV9LSR7YWN0dWFsUG9zaXRpb24uYWxpZ25tZW50fWApO1xuICB9XG5cbiAgc2V0VG9vbHRpcENvbnRlbnQoY29udGVudCkge1xuICAgIHRoaXMudG9vbHRpcC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gIH1cblxuICBtb3VzZUVudGVySGFuZGxlcihldmVudCkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuXG4gICAgdGhpcy5zZXRUb29sdGlwQ29udGVudChlbGVtZW50LmRhdGFzZXQudG9vbHRpcCk7XG4gICAgdGhpcy5zZXRUb29sdGlwUG9zaXRpb24oZWxlbWVudCk7XG4gICAgdGhpcy5zZXRUb29sdGlwVmlzaWJpbGl0eSgpO1xuICB9XG5cbiAgbW91c2VMZWF2ZUhhbmRsZXIoKSB7XG4gICAgdGhpcy5zZXRUb29sdGlwVmlzaWJpbGl0eSgpO1xuICB9XG5cbiAgYmluZEVsZW1lbnRFdmVudHMoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGV2ZW50ID0+IHRoaXMubW91c2VFbnRlckhhbmRsZXIoZXZlbnQpKTtcbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZXZlbnQgPT4gdGhpcy5tb3VzZUVudGVySGFuZGxlcihldmVudCkpO1xuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgZXZlbnQgPT4gdGhpcy5tb3VzZUxlYXZlSGFuZGxlcihldmVudCkpO1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGV2ZW50ID0+IHRoaXMubW91c2VMZWF2ZUhhbmRsZXIoZXZlbnQpKTtcbiAgfVxuXG4gIGNyZWF0ZVRvb2x0aXBEYXRhKCkge1xuICAgIFsuLi50aGlzLnRvb2x0aXBwZWRFbGVtZW50c10uZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbDtcbiAgICAgIGNvbnN0IGVsZW1lbnRIYXMgPSBUb29sdGlwLmVsSGFzTm9uRW1wdHlBdHRyKGVsZW1lbnQpO1xuXG4gICAgICBpZiAoZWxlbWVudEhhcygndGl0bGUnKSAmJiAhZWxlbWVudEhhcygnZGF0YS10b29sdGlwJykpIHtcbiAgICAgICAgZWxlbWVudC5kYXRhc2V0LnRvb2x0aXAgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndGl0bGUnKTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgJycpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWVsZW1lbnRIYXMoJ2RhdGEtcG9zaXRpb24nKSkge1xuICAgICAgICBlbGVtZW50LmRhdGFzZXQucG9zaXRpb24gPSB0aGlzLnNldHRpbmdzLnBvc2l0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAoZWxlbWVudEhhcygnZGF0YS10b29sdGlwJykpIHtcbiAgICAgICAgdGhpcy5iaW5kRWxlbWVudEV2ZW50cyhlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZVRvb2x0aXAoKSB7XG4gICAgY29uc3QgdG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRvb2x0aXAuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLnRvb2x0aXBDbGFzcyk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b29sdGlwKTtcblxuICAgIHRoaXMudG9vbHRpcCA9IHRvb2x0aXA7XG4gICAgdGhpcy5jcmVhdGVUb29sdGlwRGF0YSgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRvb2x0aXA7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdG9vbHRpcC5qcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n");

/***/ })
/******/ ]);
});