{"version":3,"file":"Tooltips.js","sources":["../src/Tooltips.js"],"sourcesContent":["class Tooltips {\n  constructor(tooltipSelector = 'a') {\n    this.tooltippedElements = document.querySelectorAll(tooltipSelector);\n    this.tooltip = null;\n    this.createTooltip();\n  }\n\n  createTooltip() {\n    const tooltipBox = document.createElement('span');\n    tooltipBox.classList.add('tooltip');\n    document.body.appendChild(tooltipBox);\n\n    this.tooltip = tooltipBox;\n\n    this.createTooltipData();\n  }\n\n  createTooltipData() {\n    [...this.tooltippedElements].forEach((element) => {\n      const tooltippedElement = element;\n\n      const elHasNonEmptyAttr = (el, attr) => {\n        return el.hasAttribute(attr) &&\n               el.getAttribute(attr) !== '';\n      };\n\n      // TODO: Provide WAI-ARIA support\n\n      if (elHasNonEmptyAttr(tooltippedElement, 'title')) {\n        tooltippedElement.dataset.tooltip = tooltippedElement.getAttribute('title');\n        tooltippedElement.setAttribute('title', '');\n      }\n\n      if (elHasNonEmptyAttr(tooltippedElement, 'data-tooltip')) {\n        tooltippedElement.dataset.position = this.getTooltipPosition(\n          tooltippedElement,\n          this.getTooltipDimensions(tooltippedElement.dataset.tooltip)\n        );\n\n        this.bindElementEvents(tooltippedElement);\n      }\n    });\n  }\n\n  getTooltipDimensions(tooltipText) {\n    const tooltipDimensions = [];\n    this.tooltip.textContent = tooltipText;\n    tooltipDimensions[0] = this.tooltip.offsetWidth;\n    tooltipDimensions[1] = this.tooltip.offsetHeight;\n    this.tooltip.textContent = '';\n\n    return tooltipDimensions;\n  }\n\n  getVerticalTooltipPosition(tooltippedElementRect, tooltipDimensions) {\n    let verticalTooltipPosition = 'top';\n    if (tooltippedElementRect.top < (tooltippedElementRect.height + tooltipDimensions[1])) {\n      verticalTooltipPosition = 'bottom';\n    }\n    return verticalTooltipPosition;\n  }\n\n  getHorizontalTooltipPosition(tooltippedElementRect, tooltipDimensions) {\n    let horizontalTooltipPosition = 'center';\n\n    if (tooltippedElementRect.left <\n      ((tooltipDimensions[0] / 2) - (tooltippedElementRect.width / 2))) {\n      horizontalTooltipPosition = 'left';\n    }\n\n    // if ( tooltippedElementRect.right ) {\n    //   tooltipPosition[ 1 ] = 'right';\n    // }\n\n    return horizontalTooltipPosition;\n  }\n\n  getTooltipPosition(tooltippedElement, tooltipDimensions) {\n    const tooltippedElementRect = tooltippedElement.getBoundingClientRect();\n    const tooltipPosition = [];\n    tooltipPosition[0] = this.getVerticalTooltipPosition(\n      tooltippedElementRect,\n      tooltipDimensions\n    );\n    tooltipPosition[1] = this.getHorizontalTooltipPosition(\n      tooltippedElementRect,\n      tooltipDimensions\n    );\n    return tooltipPosition.join('-');\n  }\n\n  bindElementEvents(element) {\n    const tooltippedElement = element;\n    let tooltippedElementRect = tooltippedElement.getBoundingClientRect();\n\n    const tooltip = this.tooltip;\n    const tooltipPosition = tooltippedElement.dataset.position.split('-');\n\n    const calcXShift = () => {\n      // [TOP/BOTTOM]-LEFT case\n      let xShift = tooltippedElementRect.left;\n\n      if (tooltipPosition[1] === 'center') {\n        // [TOP/BOTTOM]-CENTER case\n        xShift -= (tooltip.clientWidth - tooltippedElementRect.width) / 2;\n      } else if (tooltipPosition[1] === 'right') {\n        // [TOP/BOTTOM]-RIGHT case\n        xShift += tooltippedElementRect.width - tooltip.clientWidth;\n      }\n\n      return xShift;\n    };\n\n    const calcYShift = () => {\n      let yShift = 0;\n\n      if (tooltipPosition[0] === 'top') {\n        // TOP-[LEFT/CENTER/RIGHT] case\n        yShift = tooltippedElementRect.top - tooltip.clientHeight - 10;\n      } else if (tooltipPosition[0] === 'bottom') {\n        // BOTTOM-[LEFT/CENTER/RIGHT] case\n        yShift = tooltippedElementRect.bottom + 10;\n      }\n\n      return yShift;\n    };\n\n    const setTooltipPosition = (event) => {\n      tooltip.style.top = `${calcYShift(event)}px`;\n      tooltip.style.left = `${calcXShift(event)}px`;\n    };\n\n    const toggleTooltipVisibility = () => {\n      const visibilityClass = 'tooltip--visible';\n      tooltip.classList.toggle(visibilityClass);\n      if (!tooltip.classList.contains(visibilityClass)) {\n        tooltip.removeAttribute('style');\n      }\n    };\n\n    const setTooltipArrowClass = () => {\n      tooltip.classList.add(`tooltip--${element.dataset.position}`);\n    };\n\n    const removeTooltipArrowClass = () => {\n      tooltip.removeAttribute('class');\n      tooltip.classList.add('tooltip');\n    };\n\n    const mouseEnterHandler = (event) => {\n      tooltip.textContent = tooltippedElement.dataset.tooltip;\n      setTooltipPosition(event);\n      setTooltipArrowClass();\n      toggleTooltipVisibility();\n    };\n\n    const mouseLeaveHandler = () => {\n      toggleTooltipVisibility();\n      removeTooltipArrowClass();\n    };\n\n    const windowResizeHandler = () => {\n      tooltippedElementRect = tooltippedElement.getBoundingClientRect();\n    };\n\n    tooltippedElement.addEventListener('mouseenter', mouseEnterHandler);\n    tooltippedElement.addEventListener('focus', mouseEnterHandler);\n    tooltippedElement.addEventListener('mouseleave', mouseLeaveHandler);\n    tooltippedElement.addEventListener('blur', mouseLeaveHandler);\n\n    window.addEventListener('resize', windowResizeHandler);\n  }\n}\n\nexport default Tooltips;\n"],"names":["Tooltips","tooltipSelector","tooltippedElements","document","querySelectorAll","tooltip","createTooltip","tooltipBox","createElement","classList","add","body","appendChild","createTooltipData","forEach","element","tooltippedElement","elHasNonEmptyAttr","el","attr","hasAttribute","getAttribute","dataset","setAttribute","position","getTooltipPosition","getTooltipDimensions","bindElementEvents","tooltipText","tooltipDimensions","textContent","offsetWidth","offsetHeight","tooltippedElementRect","verticalTooltipPosition","top","height","horizontalTooltipPosition","left","width","getBoundingClientRect","tooltipPosition","getVerticalTooltipPosition","getHorizontalTooltipPosition","join","split","calcXShift","xShift","clientWidth","calcYShift","yShift","clientHeight","bottom","setTooltipPosition","event","style","toggleTooltipVisibility","visibilityClass","toggle","contains","removeAttribute","setTooltipArrowClass","removeTooltipArrowClass","mouseEnterHandler","mouseLeaveHandler","windowResizeHandler","addEventListener"],"mappings":"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"}