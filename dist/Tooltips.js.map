{"version":3,"file":"Tooltips.js","sources":["../src/Tooltips.js"],"sourcesContent":["class Tooltips {\n  constructor(tooltipSelector = 'a') {\n    this.tooltippedElements = document.querySelectorAll(tooltipSelector);\n    this.tooltip = null;\n    this.createTooltip();\n  }\n\n  createTooltip() {\n    const tooltipBox = document.createElement('span');\n    tooltipBox.classList.add('tooltip');\n    document.body.appendChild(tooltipBox);\n\n    this.tooltip = tooltipBox;\n\n    this.copyLabels();\n  }\n\n  copyLabels() {\n    [...this.tooltippedElements].forEach((element) => {\n      if (element.hasAttribute('title') || element.hasAttribute('data-title')) {\n        // TODO: Provide WAI-ARIA support\n\n        let title = '';\n\n        if (element.hasAttribute('title') && element.getAttribute('title') !== '') {\n          title = element.getAttribute('title');\n          element.setAttribute('title', '');\n          element.dataset.title = title;\n        } else if (element.hasAttribute('data-title') && element.dataset.title !== '') {\n          title = element.dataset.title;\n        }\n\n        if (element.dataset.title !== '') {\n          element.dataset.position = this.getTooltipPosition(element, this.getTooltipDimensions(title));\n          this.bindElementEvents(element);\n        }\n      }\n    });\n  }\n\n  getTooltipDimensions(tooltipText) {\n    const tooltipDimensions = [];\n    this.tooltip.textContent = tooltipText;\n    tooltipDimensions[0] = this.tooltip.offsetWidth;\n    tooltipDimensions[1] = this.tooltip.offsetHeight;\n    this.tooltip.textContent = '';\n\n    return tooltipDimensions;\n  }\n\n  getVerticalTooltipPosition(tooltippedElementRect, tooltipDimensions) {\n    let verticalTooltipPosition = 'top';\n    if (tooltippedElementRect.top < (tooltippedElementRect.height + tooltipDimensions[1])) {\n      verticalTooltipPosition = 'bottom';\n    }\n    return verticalTooltipPosition;\n  }\n\n  getHorizontalTooltipPosition(tooltippedElementRect, tooltipDimensions) {\n    let horizontalTooltipPosition = 'center';\n\n    if (tooltippedElementRect.left <\n      ((tooltipDimensions[0] / 2) - (tooltippedElementRect.width / 2))) {\n      horizontalTooltipPosition = 'left';\n    }\n\n    // if ( tooltippedElementRect.right ) {\n    //   tooltipPosition[ 1 ] = 'right';\n    // }\n\n    return horizontalTooltipPosition;\n  }\n\n  getTooltipPosition(tooltippedElement, tooltipDimensions) {\n    const tooltippedElementRect = tooltippedElement.getBoundingClientRect();\n    const tooltipPosition = [];\n    tooltipPosition[0] = this.getVerticalTooltipPosition(tooltippedElementRect, tooltipDimensions);\n    tooltipPosition[1] = this.getHorizontalTooltipPosition(tooltippedElementRect, tooltipDimensions);\n    return tooltipPosition.join('-');\n  }\n\n  bindElementEvents(element) {\n    const tooltippedElement = element;\n    let tooltippedElementRect = tooltippedElement.getBoundingClientRect();\n\n    const tooltip = this.tooltip;\n    const tooltipPosition = tooltippedElement.dataset.position.split('-');\n\n    const calcXShift = (event) => {\n      // [TOP/BOTTOM]-LEFT case\n      let xShift = tooltippedElementRect.left;\n\n      if (tooltipPosition[1] === 'center') {\n        // [TOP/BOTTOM]-CENTER case\n        xShift -= (tooltip.clientWidth - tooltippedElementRect.width) / 2;\n      } else if (tooltipPosition[1] === 'right') {\n        // [TOP/BOTTOM]-RIGHT case\n        xShift += tooltippedElementRect.width - tooltip.clientWidth;\n      }\n\n      return xShift;\n    };\n\n    const calcYShift = (event) => {\n      let yShift = 0;\n\n      if (tooltipPosition[0] === 'top') {\n        // TOP-[LEFT/CENTER/RIGHT] case\n        yShift = tooltippedElementRect.top - tooltip.clientHeight - 10;\n      } else if (tooltipPosition[0] === 'bottom') {\n        // BOTTOM-[LEFT/CENTER/RIGHT] case\n        yShift = tooltippedElementRect.bottom + 10;\n      }\n\n      return yShift;\n    };\n\n    const setTooltipPosition = (event) => {\n      tooltip.style.top = `${calcYShift(event)}px`;\n      tooltip.style.left = `${calcXShift(event)}px`;\n    };\n\n    const toggleTooltipVisibility = () => {\n      const visibilityClass = 'tooltip--visible';\n      tooltip.classList.toggle(visibilityClass);\n      if (!tooltip.classList.contains(visibilityClass)) {\n        tooltip.removeAttribute('style');\n      }\n    };\n\n    const setTooltipArrowClass = () => {\n      tooltip.classList.add(`tooltip--${element.dataset.position}`);\n    };\n\n    const removeTooltipArrowClass = () => {\n      tooltip.removeAttribute('class');\n      tooltip.classList.add('tooltip');\n    };\n\n    const mouseEnterHandler = (event) => {\n      tooltip.textContent = tooltippedElement.dataset.title;\n      setTooltipPosition(event);\n      setTooltipArrowClass();\n      toggleTooltipVisibility();\n    };\n\n    const mouseLeaveHandler = () => {\n      toggleTooltipVisibility();\n      removeTooltipArrowClass();\n    };\n\n    const windowResizeHandler = () => {\n      tooltippedElementRect = tooltippedElement.getBoundingClientRect();\n    };\n\n    tooltippedElement.addEventListener('mouseenter', mouseEnterHandler);\n    tooltippedElement.addEventListener('focus', mouseEnterHandler);\n    tooltippedElement.addEventListener('mouseleave', mouseLeaveHandler);\n    tooltippedElement.addEventListener('blur', mouseLeaveHandler);\n\n    window.addEventListener('resize', windowResizeHandler);\n  }\n}\n\nexport default Tooltips;\n"],"names":["Tooltips","tooltipSelector","tooltippedElements","document","querySelectorAll","tooltip","createTooltip","tooltipBox","createElement","classList","add","body","appendChild","copyLabels","forEach","element","hasAttribute","title","getAttribute","setAttribute","dataset","position","getTooltipPosition","getTooltipDimensions","bindElementEvents","tooltipText","tooltipDimensions","textContent","offsetWidth","offsetHeight","tooltippedElementRect","verticalTooltipPosition","top","height","horizontalTooltipPosition","left","width","tooltippedElement","getBoundingClientRect","tooltipPosition","getVerticalTooltipPosition","getHorizontalTooltipPosition","join","split","calcXShift","event","xShift","clientWidth","calcYShift","yShift","clientHeight","bottom","setTooltipPosition","style","toggleTooltipVisibility","visibilityClass","toggle","contains","removeAttribute","setTooltipArrowClass","removeTooltipArrowClass","mouseEnterHandler","mouseLeaveHandler","windowResizeHandler","addEventListener"],"mappings":"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"}