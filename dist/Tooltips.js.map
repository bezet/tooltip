{"version":3,"file":"Tooltips.js","sources":["../src/Tooltips.js"],"sourcesContent":["class Tooltips {\n  constructor(tooltipSelector = 'a') {\n    this.tooltippedElements = document.querySelectorAll(tooltipSelector);\n    this.tooltip = null;\n    this.createTooltip();\n  }\n\n  createTooltip() {\n    const tooltipBox = document.createElement('span');\n    tooltipBox.classList.add('tooltip');\n    document.body.appendChild(tooltipBox);\n\n    this.tooltip = tooltipBox;\n\n    this.copyLabels();\n  }\n\n  copyLabels() {\n    [...this.tooltippedElements].forEach((element) => {\n      const tooltippedElement = element;\n      let title = '';\n\n      const elementHasNonEmptyAttribute = (el, attribute) => {\n        return tooltippedElement.hasAttribute(attribute) &&\n        tooltippedElement.getAttribute(attribute) !== '';\n      };\n\n      if (tooltippedElement.hasAttribute('title') || tooltippedElement.hasAttribute('data-title')) {\n        // TODO: Provide WAI-ARIA support\n\n        if (elementHasNonEmptyAttribute(tooltippedElement, 'title')) {\n          title = tooltippedElement.getAttribute('title');\n          tooltippedElement.setAttribute('title', '');\n          tooltippedElement.dataset.title = title;\n        } else if (elementHasNonEmptyAttribute(tooltippedElement, 'data-title')) {\n          title = tooltippedElement.dataset.title;\n        }\n\n        if (tooltippedElement.dataset.title !== '') {\n          tooltippedElement.dataset.position = this.getTooltipPosition(\n            tooltippedElement,\n            this.getTooltipDimensions(title)\n          );\n          this.bindElementEvents(tooltippedElement);\n        }\n      }\n    });\n  }\n\n  getTooltipDimensions(tooltipText) {\n    const tooltipDimensions = [];\n    this.tooltip.textContent = tooltipText;\n    tooltipDimensions[0] = this.tooltip.offsetWidth;\n    tooltipDimensions[1] = this.tooltip.offsetHeight;\n    this.tooltip.textContent = '';\n\n    return tooltipDimensions;\n  }\n\n  static getVerticalTooltipPosition(tooltippedElementRect, tooltipDimensions) {\n    let verticalTooltipPosition = 'top';\n    if (tooltippedElementRect.top < (tooltippedElementRect.height + tooltipDimensions[1])) {\n      verticalTooltipPosition = 'bottom';\n    }\n    return verticalTooltipPosition;\n  }\n\n  static getHorizontalTooltipPosition(tooltippedElementRect, tooltipDimensions) {\n    let horizontalTooltipPosition = 'center';\n\n    if (tooltippedElementRect.left <\n      ((tooltipDimensions[0] / 2) - (tooltippedElementRect.width / 2))) {\n      horizontalTooltipPosition = 'left';\n    }\n\n    // if ( tooltippedElementRect.right ) {\n    //   tooltipPosition[ 1 ] = 'right';\n    // }\n\n    return horizontalTooltipPosition;\n  }\n\n  getTooltipPosition(tooltippedElement, tooltipDimensions) {\n    const tooltippedElementRect = tooltippedElement.getBoundingClientRect();\n    const tooltipPosition = [];\n    tooltipPosition[0] = this.getVerticalTooltipPosition(\n      tooltippedElementRect,\n      tooltipDimensions\n    );\n    tooltipPosition[1] = this.getHorizontalTooltipPosition(\n      tooltippedElementRect,\n      tooltipDimensions\n    );\n    return tooltipPosition.join('-');\n  }\n\n  bindElementEvents(element) {\n    const tooltippedElement = element;\n    let tooltippedElementRect = tooltippedElement.getBoundingClientRect();\n\n    const tooltip = this.tooltip;\n    const tooltipPosition = tooltippedElement.dataset.position.split('-');\n\n    const calcXShift = () => {\n      // [TOP/BOTTOM]-LEFT case\n      let xShift = tooltippedElementRect.left;\n\n      if (tooltipPosition[1] === 'center') {\n        // [TOP/BOTTOM]-CENTER case\n        xShift -= (tooltip.clientWidth - tooltippedElementRect.width) / 2;\n      } else if (tooltipPosition[1] === 'right') {\n        // [TOP/BOTTOM]-RIGHT case\n        xShift += tooltippedElementRect.width - tooltip.clientWidth;\n      }\n\n      return xShift;\n    };\n\n    const calcYShift = () => {\n      let yShift = 0;\n\n      if (tooltipPosition[0] === 'top') {\n        // TOP-[LEFT/CENTER/RIGHT] case\n        yShift = tooltippedElementRect.top - tooltip.clientHeight - 10;\n      } else if (tooltipPosition[0] === 'bottom') {\n        // BOTTOM-[LEFT/CENTER/RIGHT] case\n        yShift = tooltippedElementRect.bottom + 10;\n      }\n\n      return yShift;\n    };\n\n    const setTooltipPosition = (event) => {\n      tooltip.style.top = `${calcYShift(event)}px`;\n      tooltip.style.left = `${calcXShift(event)}px`;\n    };\n\n    const toggleTooltipVisibility = () => {\n      const visibilityClass = 'tooltip--visible';\n      tooltip.classList.toggle(visibilityClass);\n      if (!tooltip.classList.contains(visibilityClass)) {\n        tooltip.removeAttribute('style');\n      }\n    };\n\n    const setTooltipArrowClass = () => {\n      tooltip.classList.add(`tooltip--${element.dataset.position}`);\n    };\n\n    const removeTooltipArrowClass = () => {\n      tooltip.removeAttribute('class');\n      tooltip.classList.add('tooltip');\n    };\n\n    const mouseEnterHandler = (event) => {\n      tooltip.textContent = tooltippedElement.dataset.title;\n      setTooltipPosition(event);\n      setTooltipArrowClass();\n      toggleTooltipVisibility();\n    };\n\n    const mouseLeaveHandler = () => {\n      toggleTooltipVisibility();\n      removeTooltipArrowClass();\n    };\n\n    const windowResizeHandler = () => {\n      tooltippedElementRect = tooltippedElement.getBoundingClientRect();\n    };\n\n    tooltippedElement.addEventListener('mouseenter', mouseEnterHandler);\n    tooltippedElement.addEventListener('focus', mouseEnterHandler);\n    tooltippedElement.addEventListener('mouseleave', mouseLeaveHandler);\n    tooltippedElement.addEventListener('blur', mouseLeaveHandler);\n\n    window.addEventListener('resize', windowResizeHandler);\n  }\n}\n\nexport default Tooltips;\n"],"names":["Tooltips","tooltipSelector","tooltippedElements","document","querySelectorAll","tooltip","createTooltip","tooltipBox","createElement","classList","add","body","appendChild","copyLabels","forEach","element","tooltippedElement","title","elementHasNonEmptyAttribute","el","attribute","hasAttribute","getAttribute","setAttribute","dataset","position","getTooltipPosition","getTooltipDimensions","bindElementEvents","tooltipText","tooltipDimensions","textContent","offsetWidth","offsetHeight","tooltippedElementRect","getBoundingClientRect","tooltipPosition","getVerticalTooltipPosition","getHorizontalTooltipPosition","join","split","calcXShift","xShift","left","clientWidth","width","calcYShift","yShift","top","clientHeight","bottom","setTooltipPosition","event","style","toggleTooltipVisibility","visibilityClass","toggle","contains","removeAttribute","setTooltipArrowClass","removeTooltipArrowClass","mouseEnterHandler","mouseLeaveHandler","windowResizeHandler","addEventListener","verticalTooltipPosition","height","horizontalTooltipPosition"],"mappings":"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"}